<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Sistemas Fotovoltaicos</title>
    <link rel="stylesheet" href="css/principal.css">
</head>

<body>
    <header>
        <div class="nav-bar">
            <a href="principalSistema.html" class="logo"><img src="Images/LogoTSolar.jpg" alt="Logo"></a>
            <button class="ic--baseline-home">
            </button>
            <h1>CALCULADORA DE <br> SISTEMAS FOTOVOLTAICOS</h1>
        </div>
    </header>
    <main>
        <div class="titulo">
            <h1>CALCULADORA DE SISTEMAS <br> FOTOVOLTAICOS INTERCONECTADOS</h1>
        </div>
        <div class="contenedor-principal">
            <div class="CONSUMO">
                <div class="seccion-consumo">
                    <h2>DETALLES DE CONSUMO ENERGÉTICO</h2>
                    <table>
                        <thead>
                            <tr>
                                <th>Bimestre</th>
                                <th>Fecha Inicio</th>
                                <th>Fecha Término</th>
                                <th>Consumo Energético</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>Fecha del Primer Bimestre:</td>
                                <td><input id="iniPrimero" type="date"></td>
                                <td><input id="finPrimero" type="date"></td>
                                <td><input id="cprimero" class="consumos" type="number"></td>
                            </tr>
                            <tr>
                                <td>Fecha del Segundo Bimestre:</td>
                                <td><input id="iniSegundo" type="date"></td>
                                <td><input id="finSegundo" type="date"></td>
                                <td><input id="cSegundo" class="consumos" type="number"></td>
                            </tr>
                            <tr>
                                <td>Fecha del Tercer Bimestre:</td>
                                <td><input id="iniTercero" type="date"></td>
                                <td><input id="finTercero" type="date"></td>
                                <td><input id="cTercero" class="consumos" type="number"></td>
                            </tr>
                            <tr>
                                <td>Fecha del Cuarto Bimestre:</td>
                                <td><input id="iniCuarto" type="date"></td>
                                <td><input id="finCuarto" type="date"></td>
                                <td><input id="cCuarto" class="consumos" type="number"></td>
                            </tr>
                            <tr>
                                <td>Fecha del Quinto Bimestre:</td>
                                <td><input id="iniQuinto" type="date"></td>
                                <td><input id="finQuinto" type="date"></td>
                                <td><input id="cQuinto" class="consumos" type="number"></td>
                            </tr>
                            <tr>
                                <td>Fecha del Sexto Bimestre:</td>
                                <td><input id="iniSexto" type="date"></td>
                                <td><input id="finSexto" type="date"></td>
                                <td><input id="cSexto" class="consumos" type="number"></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="UBICACION">
                <div colspan="2" class="seccion-ubicacion">
                    <h2>INFORMACIÓN DE <br> LA UBICACIÓN</h2>
                    <div class="input-ubicacion">
                        <label for="ubicacion">Ubicación del Sitio:</label>
                        <input type="text" id="ubicacion" required>
                    </div>
                    <div class="input-ubicacion">
                        <label for="propiedad">Tipo de Propiedad:</label>
                        <select id="propiedad">
                            <option value="">Seleccione una opción</option>
                            <option value="Residencial">Residencial</option>
                            <option value="Comercial">Comercial</option>
                            <option value="Industrial">Industrial</option>
                        </select>
                    </div>
                    <div class="input-ubicacion">
                        <label for="horas_solares">Horas Solares Diarias del Sitio:</label>
                        <input type="number" id="horas_solares" min="0" required>
                    </div>
                </div>
                <div class="buttons">
                    <button class="continuar" type="button">Continuar</button>
                    <button class="cancelar" type="button">Cancelar</button>
                </div>
            </div>
        </div>
    </main>
    <footer>
        <div class="container">
            <p>&copy; 2024 TECNOLOGÍA SOLAR DE MÉXICO S.A. DE C.V.</p>
        </div>
    </footer>
    <script src="src/controllers/formulas.js"></script>
    <script src="src/controllers/validaciones.js"></script>

    <script>
        document.querySelector('.continuar').addEventListener('click', function () {
            // Validar datos de ubicación
            if (validarDatosUbicacion()) {
                // Obtener valores de los campos
                const ubicacion = document.getElementById('ubicacion').value;
                const tipoPropiedad = document.getElementById('propiedad').value;
                const horasSolares = parseFloat(document.getElementById('horas_solares').value) || 0;
    
                // Imprimir valores para verificar
                console.log("Ubicación:", ubicacion);
                console.log("Tipo de Propiedad:", tipoPropiedad);
                console.log("Horas Solares Diarias:", horasSolares);
    
                // Guardar los datos en el almacenamiento local
                localStorage.setItem('ubicacion', ubicacion);
                localStorage.setItem('tipoPropiedad', tipoPropiedad);
                localStorage.setItem('horasSolares', horasSolares);
    
                // Validar datos de consumo antes de continuar
                if (validarDatosConsumo()) {
                    // Redirigir a la página de resultados
                    window.location.href = '/public/views/resultadosSistema.html';
                }
            } else {
                console.log("Validación fallida en datos de ubicación.");
            }
        });
    </script>  
    
</body>
</html>